# Dashboard Internationalization Design

**Date:** 2025-12-20
**Status:** Approved
**Languages:** EN, FR, ES

## Overview

Implement i18n for the entire dashboard using the same system as the landing page (Laravel JSON translations passed via Inertia props), with a custom hook and helpers for cleaner usage.

## Current State

| Zone | Coverage | Details |
|------|----------|---------|
| Landing page | ✅ 100% | 3 languages via `resources/lang/{locale}/landing.json` |
| Dashboard | ❌ ~5% | Hardcoded text (mix FR/EN) |
| Components | ❌ 0% | No i18n |

## Design Decisions

1. **Same system as landing page** - Laravel JSON files + Inertia props
2. **Two files only** - `landing.json` (existing) + `app.json` (all dashboard)
3. **3 languages** - EN, FR, ES (same as landing)
4. **Custom hook + helpers** - For cleaner, DRY code

## File Structure

### Translation Files

```
resources/lang/
├── en/
│   ├── landing.json   # ✅ existing
│   └── app.json       # new - all dashboard
├── fr/
│   ├── landing.json   # ✅ existing
│   └── app.json       # new
└── es/
    ├── landing.json   # ✅ existing
    └── app.json       # new
```

### New TypeScript Files

```
resources/js/
├── hooks/
│   └── useTranslations.ts    # Centralized hook
├── utils/
│   └── i18n.ts               # Helpers (trans, plural)
```

## Translation File Structure (`app.json`)

```json
{
  "common": {
    "add": "Add",
    "edit": "Edit",
    "delete": "Delete",
    "save": "Save",
    "cancel": "Cancel",
    "search": "Search...",
    "noResults": "No results found",
    "loading": "Loading...",
    "previous": "Previous",
    "next": "Next",
    "article": "article",
    "articles": "articles",
    "site": "site",
    "sites": "sites",
    "keyword": "keyword",
    "keywords": "keywords",
    "of": "of",
    "to": "to"
  },
  "nav": {
    "main": "MAIN",
    "analytics": "ANALYTICS",
    "settings": "SETTINGS",
    "dashboard": "Dashboard",
    "sites": "Sites",
    "articles": "Articles",
    "keywords": "Keywords",
    "performance": "Performance",
    "rankings": "Rankings",
    "integrations": "Integrations"
  },
  "status": {
    "active": "Active",
    "paused": "Paused",
    "pending": "Pending",
    "queued": "Queued",
    "generating": "Generating",
    "review": "In review",
    "approved": "Approved",
    "published": "Published",
    "failed": "Failed",
    "completed": "Completed",
    "notConfigured": "Not configured",
    "error": "Error"
  },
  "user": {
    "profile": "Profile",
    "settings": "Settings",
    "logout": "Log out"
  },
  "dashboard": {
    "title": "Dashboard",
    "subtitle": "Overview of your SEO content performance",
    "activeSites": "Active sites",
    "keywordsQueued": "Keywords queued",
    "articlesThisMonth": "Articles this month",
    "published": "Published",
    "monthlyUsage": "Monthly usage",
    "addSite": "Add site",
    "mySites": "My sites",
    "viewAll": "View all",
    "noSites": "No sites configured",
    "noSitesDescription": "Get started by adding your first website",
    "addFirstSite": "Add your first site",
    "actionsRequired": "Actions required"
  },
  "sites": {
    "title": "Sites",
    "subtitle": "Manage your connected websites",
    "addSite": "Add a site",
    "noSites": "No sites configured",
    "noSitesDescription": "Add your first website to start generating content",
    "addedOn": "Added on",
    "keywordsCount": "{count} keywords",
    "articlesCount": "{count} articles"
  },
  "articles": {
    "title": "Articles",
    "subtitle": "Automatically generated by Autopilot",
    "generated": "articles generated",
    "total": "Total",
    "inReview": "In review",
    "approved": "Approved",
    "published": "Published",
    "allSites": "All sites",
    "allStatuses": "All statuses",
    "searchPlaceholder": "Search an article...",
    "tableTitle": "Title",
    "tableWords": "Words",
    "tableStatus": "Status",
    "tableCreated": "Created",
    "tableActions": "Actions",
    "approve": "Approve",
    "publish": "Publish",
    "noArticles": "No articles found",
    "noArticlesDescription": "Articles will appear here once generated"
  },
  "keywords": {
    "title": "Keywords",
    "subtitle": "Automatically discovered by Autopilot",
    "tracked": "keywords tracked",
    "total": "Total",
    "queued": "Queued",
    "generating": "Generating",
    "completed": "Completed",
    "allSites": "All sites",
    "allStatuses": "All statuses",
    "searchPlaceholder": "Search a keyword...",
    "tableKeyword": "Keyword",
    "tableVolume": "Volume",
    "tableDifficulty": "Difficulty",
    "tableStatus": "Status",
    "tableArticles": "Articles",
    "tableAdded": "Added",
    "noKeywords": "No keywords found",
    "noKeywordsDescription": "Keywords will appear here once discovered"
  },
  "analytics": {
    "title": "Analytics",
    "subtitle": "Search Console performance data",
    "selectSite": "Select a site",
    "totalClicks": "Total Clicks",
    "impressions": "Impressions",
    "averageCtr": "Average CTR",
    "averagePosition": "Average Position",
    "topPages": "Top Pages",
    "topQueries": "Top Queries",
    "noData": "No data available",
    "connectGsc": "Connect Google Search Console to see analytics"
  },
  "settings": {
    "title": "Settings",
    "subtitle": "Manage your account and preferences",
    "currentPlan": "Current plan",
    "articlesRemaining": "articles remaining this month",
    "articlesThisMonth": "articles this month",
    "upgrade": "Upgrade",
    "billing": "Billing",
    "billingDescription": "Manage your subscription and invoices",
    "team": "Team",
    "teamDescription": "Invite and manage team members",
    "apiKeys": "API Keys",
    "apiKeysDescription": "Manage your API access keys",
    "brandVoices": "Brand Voices",
    "brandVoicesDescription": "Configure your content tone and style",
    "notifications": "Notifications",
    "notificationsDescription": "Configure your notification preferences"
  },
  "onboarding": {
    "welcome": {
      "title": "Welcome to SEO Autopilot",
      "subtitle": "Let's set up your account in a few simple steps"
    },
    "step1": {
      "title": "Add your first site",
      "description": "Enter your website URL to get started"
    },
    "step2": {
      "title": "Connect Google Search Console",
      "description": "Link your GSC account for keyword discovery"
    },
    "step3": {
      "title": "Configure your brand voice",
      "description": "Define the tone and style for your content"
    },
    "step4": {
      "title": "Set your preferences",
      "description": "Choose your content generation settings"
    },
    "step5": {
      "title": "Review and launch",
      "description": "Review your settings and start the autopilot"
    },
    "next": "Next",
    "back": "Back",
    "skip": "Skip",
    "finish": "Finish setup"
  },
  "usage": {
    "title": "Usage",
    "upgradePlan": "Upgrade plan",
    "of": "of"
  }
}
```

## Technical Implementation

### 1. Laravel Middleware (`HandleInertiaRequests.php`)

```php
public function share(Request $request): array
{
    $locale = app()->getLocale();

    return array_merge(parent::share($request), [
        'locale' => $locale,
        'translations' => [
            'app' => $this->loadTranslations($locale, 'app'),
        ],
    ]);
}

private function loadTranslations(string $locale, string $file): array
{
    $path = lang_path("{$locale}/{$file}.json");

    if (file_exists($path)) {
        return json_decode(file_get_contents($path), true);
    }

    // Fallback to English
    $fallbackPath = lang_path("en/{$file}.json");
    return file_exists($fallbackPath)
        ? json_decode(file_get_contents($fallbackPath), true)
        : [];
}
```

### 2. Hook `useTranslations.ts`

```tsx
import { usePage } from '@inertiajs/react';

interface PageProps {
  locale: 'en' | 'fr' | 'es';
  translations: {
    app: Record<string, any>;
  };
}

export function useTranslations() {
  const { translations, locale } = usePage<PageProps>().props;
  return {
    t: translations.app,
    locale,
  };
}
```

### 3. Helpers `i18n.ts`

```tsx
/**
 * Interpolate variables in a translation string
 * Usage: trans(t.welcome, { name: 'Jérôme' })
 * Template: "Hello {name}" -> "Hello Jérôme"
 */
export function trans(template: string, params: Record<string, string | number>): string {
  if (!template) return '';
  return template.replace(/{(\w+)}/g, (_, key) => String(params[key] ?? ''));
}

/**
 * Simple pluralization helper
 * Usage: plural(count, t.common.article, t.common.articles)
 */
export function plural(count: number, singular: string, plural: string): string {
  return count === 1 ? singular : plural;
}
```

### 4. Usage Example

```tsx
import { useTranslations } from '@/hooks/useTranslations';
import { trans, plural } from '@/utils/i18n';

export default function ArticlesIndex({ articles }) {
  const { t } = useTranslations();

  return (
    <>
      <h1>{t.articles.title}</h1>
      <p>{trans(t.articles.count, { count: articles.total })}</p>
      <span>{articles.total} {plural(articles.total, t.common.article, t.common.articles)}</span>
      <Badge>{t.status.published}</Badge>
    </>
  );
}
```

## Pages to Modify

1. **AppLayout.tsx** - Navigation, sidebar, user menu
2. **Dashboard.tsx** - Stats cards, empty states, buttons
3. **Sites/Index.tsx** - Site list, status badges, buttons
4. **Articles/Index.tsx** - Table, filters, pagination
5. **Keywords/Index.tsx** - Table, status badges
6. **Analytics/Index.tsx** - Stats, chart labels
7. **Settings/Index.tsx** - Plan info, settings links
8. **Onboarding/Wizard.tsx** - All 6 steps

## Implementation Order

1. Create `app.json` for EN (reference)
2. Create `useTranslations` hook
3. Create `i18n.ts` helpers
4. Update `HandleInertiaRequests.php`
5. Update `AppLayout.tsx` (navigation)
6. Update each dashboard page
7. Create FR translation
8. Create ES translation
9. Test language switching
